import{r as V,c as u,o as d,a as T,b as t,d as fe,e as W,f as C,w as ce,g as ee,v as se,T as he,h as M,i as E,n as ie,j as Y,k as _,t as $,F as q,l as N,m as me,p as Q,q as be,u as D,s as ve,x as ye,y as we}from"./vue-BTWk32xT.js";import{s as Se}from"./sqlite-CUvLhlMF.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))h(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&h(l)}).observe(document,{childList:!0,subtree:!0});function i(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function h(a){if(a.ep)return;a.ep=!0;const r=i(a);fetch(a.href,r)}})();let k=null,R=null;const le=V(!1),I=V(""),Z=V({count:0}),$e="food-database-cache",_e=1,re="database-data";function ge(){async function e(){if(R)return R;try{return R=await Se({print:console.log,printErr:console.error}),console.log("SQLite wasm initialized:",R.version.libVersion),R}catch(n){throw console.error("Failed to initialize SQLite:",n),n}}async function s(){return new Promise((n,p)=>{const b=indexedDB.open($e,_e);b.onerror=()=>p(b.error),b.onsuccess=()=>n(b.result),b.onupgradeneeded=v=>{const S=v.target.result;S.objectStoreNames.contains("databases")||S.createObjectStore("databases")}})}async function i(){try{const n=await s();return new Promise((p,b)=>{const y=n.transaction(["databases"],"readonly").objectStore("databases").get(re);y.onerror=()=>b(y.error),y.onsuccess=()=>p(y.result)})}catch(n){return console.error("Error getting cached database:",n),null}}async function h(n){try{const p=await s();return new Promise((b,v)=>{const L=p.transaction(["databases"],"readwrite").objectStore("databases").put(n,re);L.onerror=()=>v(L.error),L.onsuccess=()=>b(!0)})}catch(p){return console.error("Error caching database:",p),!1}}async function a(){try{const n=await s();return new Promise((p,b)=>{const y=n.transaction(["databases"],"readwrite").objectStore("databases").delete(re);y.onerror=()=>b(y.error),y.onsuccess=()=>p(!0)})}catch(n){return console.error("Error clearing cache:",n),!1}}async function r(){le.value=!0,I.value="Initializing database...";try{await e(),I.value="Checking cache...";const n=await i();let p;if(n)console.log("Loading database from cache"),I.value="Loading from cache...",p=new Uint8Array(n);else{console.log("Downloading database from server"),I.value="Downloading database...";const y=await fetch("/data.sqlite");if(!y.ok)throw new Error(`Failed to fetch database: ${y.statusText}`);const L=await y.arrayBuffer();p=new Uint8Array(L),I.value="Caching database...",await h(L),console.log("Database cached successfully")}I.value="Loading database...",k&&(k.close(),k=null),k=new R.oo1.DB(":memory:");const b=R.wasm.alloc(p.length),v=1024*1024;for(let y=0;y<p.length;y+=v){const L=Math.min(y+v,p.length),B=p.slice(y,L);R.wasm.heap8().set(B,b+y)}const S=R.capi.sqlite3_deserialize(k.pointer,"main",b,p.length,p.length,R.capi.SQLITE_DESERIALIZE_FREEONCLOSE|R.capi.SQLITE_DESERIALIZE_RESIZEABLE);if(S!==0)throw R.wasm.dealloc(b),new Error(`Failed to deserialize database: ${R.capi.sqlite3_errstr(S)}`);return console.log("Database loaded successfully"),await l(),!0}catch(n){throw console.error("Error loading database:",n),n}finally{le.value=!1,I.value=""}}async function l(){if(!k){Z.value={count:0};return}try{const n=k.exec({sql:"SELECT COUNT(*) as count FROM food",returnValue:"resultRows",rowMode:"object"});n&&n.length>0&&(Z.value={count:n[0].count})}catch(n){console.error("Error updating stats:",n),Z.value={count:0}}}async function f(n,p=1,b=21,v=null){if(!k)return{products:[],totalCount:0,totalPages:0};try{const S=(p-1)*b,y={};let L="FROM food f";const B=[];if(n.search&&n.search.trim()&&(L=`
                    FROM food_fts fts
                    JOIN food f ON f.id = fts.rowid
                `,B.push("food_fts MATCH :search"),y[":search"]=n.search.trim()+"*"),n.brands&&n.brands.length>0){const g=n.brands.map(o=>typeof o=="object"?o.id:o).map((o,m)=>{const c=`:brand${m}`;return y[c]=o,c}).join(",");B.push(`f.id IN (
                    SELECT food_id FROM brand_food
                    WHERE brand_id IN (${g})
                )`)}if(n.categories&&n.categories.length>0){const g=n.categories.map(o=>typeof o=="object"?o.id:o).map((o,m)=>{const c=`:category${m}`;return y[c]=o,c}).join(",");B.push(`f.id IN (
                    SELECT food_id FROM category_food
                    WHERE category_id IN (${g})
                )`)}if(n.stores&&n.stores.length>0){const g=n.stores.map(o=>typeof o=="object"?o.id:o).map((o,m)=>{const c=`:store${m}`;return y[c]=o,c}).join(",");B.push(`f.id IN (
                    SELECT food_id FROM store_food
                    WHERE store_id IN (${g})
                )`)}const G=B.length>0?`WHERE ${B.join(" AND ")}`:"",U=`
                SELECT COUNT(*) as count
                ${L}
                ${G}
            `,A=k.exec({sql:U,bind:y,returnValue:"resultRows",rowMode:"object"}),z=A&&A.length>0?A[0].count:0;let x;v&&Array.isArray(v)&&v.length>0?x=`ORDER BY ${v.map(g=>{const o=g.direction.toUpperCase();return`f.${g.field} ${o} NULLS LAST`}).join(", ")}`:n.search&&n.search.trim()?x="ORDER BY fts.rank":x="ORDER BY f.name";const J=`
                SELECT
                    f.id,
                    f.name,
                    f.url,
                    f.image_url,
                    f.brands,
                    f.categories,
                    f.stores,
                    f.fat,
                    f.protein,
                    f.carbs,
                    f.energy,
                    f.protein_fat_index
                ${L}
                ${G}
                ${x}
                LIMIT :limit OFFSET :offset
            `;return{products:k.exec({sql:J,bind:{...y,":limit":b,":offset":S},returnValue:"resultRows",rowMode:"object"})||[],totalCount:z,totalPages:Math.ceil(z/b)}}catch(S){return console.error("Error querying products:",S),{products:[],totalCount:0,totalPages:0}}}async function O(n=""){if(!k)return[];try{let p,b={};n&&n.trim()?(p=`
                    SELECT rowid as id, brand
                    FROM brands_fts
                    WHERE brand MATCH :search
                    ORDER BY rank
                    LIMIT 100
                `,b[":search"]=n.trim()+"*"):p=`
                    SELECT id, brand
                    FROM brands
                    ORDER BY brand ASC
                    LIMIT 100
                `;const v=k.exec({sql:p,bind:b,returnValue:"resultRows",rowMode:"object"});return v?v.filter(S=>S.brand):[]}catch(p){return console.error("Error getting unique brands:",p),[]}}async function H(n=""){if(!k)return[];try{let p,b={};n&&n.trim()?(p=`
                    SELECT rowid as id, category
                    FROM categories_fts
                    WHERE category MATCH :search
                    ORDER BY rank
                    LIMIT 100
                `,b[":search"]=n.trim()+"*"):p=`
                    SELECT id, category
                    FROM categories
                    ORDER BY category ASC
                    LIMIT 100
                `;const v=k.exec({sql:p,bind:b,returnValue:"resultRows",rowMode:"object"});return v?v.filter(S=>S.category):[]}catch(p){return console.error("Error getting unique categories:",p),[]}}async function j(n=""){if(!k)return[];try{let p,b={};n&&n.trim()?(p=`
                    SELECT rowid as id, store
                    FROM stores_fts
                    WHERE store MATCH :search
                    ORDER BY rank
                    LIMIT 100
                `,b[":search"]=n.trim()+"*"):p=`
                    SELECT id, store
                    FROM stores
                    ORDER BY store ASC
                `;const v=k.exec({sql:p,bind:b,returnValue:"resultRows",rowMode:"object"});return v?v.filter(S=>S.store):[]}catch(p){return console.error("Error getting unique stores:",p),[]}}async function F(){return k!==null&&Z.value.count>0}async function P(){return k&&(k.close(),k=null,Z.value={count:0}),await a(),console.log("Database and cache cleared"),!0}return{loading:le,loadingMessage:I,dbStats:Z,loadData:r,clearDatabase:P,clearDatabaseCache:a,updateStats:l,queryProducts:f,getUniqueBrands:O,getUniqueCategories:H,getUniqueStores:j,hasData:F}}function oe(e){return e===0?!1:Array.isArray(e)&&e.length===0?!0:!e}function Oe(e){return(...s)=>!e(...s)}function Le(e,s){return e===void 0&&(e="undefined"),e===null&&(e="null"),e===!1&&(e="false"),e.toString().toLowerCase().indexOf(s.trim())!==-1}function Ee(e){return e.filter(s=>!s.$isLabel)}function ne(e,s){return i=>i.reduce((h,a)=>a[e]&&a[e].length?(h.push({$groupLabel:a[s],$isLabel:!0}),h.concat(a[e])):h,[])}const pe=(...e)=>s=>e.reduce((i,h)=>h(i),s);var ke={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(e,s){return oe(e)?"":s?e[s]:e}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1},filteringSortFunc:{type:Function,default:null}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const e=this.search||"",s=e.toLowerCase().trim();let i=this.options.concat();return this.internalSearch?i=this.groupValues?this.filterAndFlat(i,s,this.label):this.filterOptions(i,s,this.label,this.customLabel):i=this.groupValues?ne(this.groupValues,this.groupLabel)(i):i,i=this.hideSelected?i.filter(Oe(this.isSelected)):i,this.taggable&&s.length&&!this.isExistingOption(s)&&(this.tagPosition==="bottom"?i.push({isTag:!0,label:e}):i.unshift({isTag:!0,label:e})),i.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(e=>e[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(s=>this.customLabel(s,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(e,s,i){return pe(this.filterGroups(s,i,this.groupValues,this.groupLabel,this.customLabel),ne(this.groupValues,this.groupLabel))(e)},flatAndStrip(e){return pe(ne(this.groupValues,this.groupLabel),Ee)(e)},updateSearch(e){this.search=e},isExistingOption(e){return this.options?this.optionKeys.indexOf(e)>-1:!1},isSelected(e){const s=this.trackBy?e[this.trackBy]:e;return this.valueKeys.indexOf(s)>-1},isOptionDisabled(e){return!!e.$isDisabled},getOptionLabel(e){if(oe(e))return"";if(e.isTag)return e.label;if(e.$isLabel)return e.$groupLabel;const s=this.customLabel(e,this.label);return oe(s)?"":s},select(e,s){if(e.$isLabel&&this.groupSelect){this.selectGroup(e);return}if(!(this.blockKeys.indexOf(s)!==-1||this.disabled||e.$isDisabled||e.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(s==="Tab"&&!this.pointerDirty)){if(e.isTag)this.$emit("tag",e.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(e)){s!=="Tab"&&this.removeElement(e);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([e])):this.$emit("update:modelValue",e),this.$emit("select",e,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(e){const s=this.options.find(i=>i[this.groupLabel]===e.$groupLabel);if(s){if(this.wholeGroupSelected(s)){this.$emit("remove",s[this.groupValues],this.id);const i=this.trackBy?s[this.groupValues].map(a=>a[this.trackBy]):s[this.groupValues],h=this.internalValue.filter(a=>i.indexOf(this.trackBy?a[this.trackBy]:a)===-1);this.$emit("update:modelValue",h)}else{const i=s[this.groupValues].filter(h=>!(this.isOptionDisabled(h)||this.isSelected(h)));this.max&&i.splice(this.max-this.internalValue.length),this.$emit("select",i,this.id),this.$emit("update:modelValue",this.internalValue.concat(i))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(e){return e[this.groupValues].every(s=>this.isSelected(s)||this.isOptionDisabled(s))},wholeGroupDisabled(e){return e[this.groupValues].every(this.isOptionDisabled)},removeElement(e,s=!0){if(this.disabled||e.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const i=typeof e=="object"?this.valueKeys.indexOf(e[this.trackBy]):this.valueKeys.indexOf(e);if(this.multiple){const h=this.internalValue.slice(0,i).concat(this.internalValue.slice(i+1));this.$emit("update:modelValue",h)}else this.$emit("update:modelValue",null);this.$emit("remove",e,this.id),this.closeOnSelect&&s&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const e=this.$el.getBoundingClientRect().top,s=window.innerHeight-this.$el.getBoundingClientRect().bottom;s>this.maxHeight||s>e||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(s-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(e-40,this.maxHeight))},filterOptions(e,s,i,h){return s?e.filter(a=>Le(h(a,i),s)).sort((a,r)=>typeof this.filteringSortFunc=="function"?this.filteringSortFunc(a,r):h(a,i).length-h(r,i).length):e},filterGroups(e,s,i,h,a){return r=>r.map(l=>{if(!l[i])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const f=this.filterOptions(l[i],e,s,a);return f.length?{[h]:l[h],[i]:f}:[]})}}},Ve={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(e,s){return{"multiselect__option--highlight":e===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(s)}},groupHighlight(e,s){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":s.$isLabel}];const i=this.options.find(h=>h[this.groupLabel]===s.$groupLabel);return i&&!this.wholeGroupDisabled(i)?["multiselect__option--group",{"multiselect__option--highlight":e===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(i)}]:"multiselect__option--disabled"},addPointerElement({key:e}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],e),this.pointerReset()},pointerForward(){var e;this.pointer<this.filteredOptions.length-1&&(this.pointer++,((e=this.$refs.list)==null?void 0:e.scrollTop)<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){var e;this.pointer>0?(this.pointer--,((e=this.$refs.list)==null?void 0:e.scrollTop)>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(e){this.pointer=e,this.pointerDirty=!0}}},ae={name:"vue-multiselect",mixins:[ke,Ve],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:e=>`and ${e} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0},required:{type:Boolean,default:!1},useTeleport:{type:Boolean,default:!1},contentWrapperClass:{type:[String,Array,Object],default:""}},data(){return{dropdownStyles:{},ready:!1}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)},isRequired(){return this.required===!1?!1:this.internalValue.length<=0}},watch:{isOpen(e){e&&(this.useTeleport?(this.ready=!1,this.$nextTick(()=>{const s=this.$el.getBoundingClientRect();this.dropdownStyles={position:"absolute",top:`${s.bottom+window.scrollY}px`,left:`${s.left+window.scrollX}px`,width:`${s.width}px`,zIndex:9999},this.ready=!0})):this.ready=!0)}}};const Ce=["tabindex","aria-expanded","aria-owns","aria-activedescendant"],Be={ref:"tags",class:"multiselect__tags"},Te={class:"multiselect__tags-wrap"},De=["textContent"],xe=["onKeydown","onMousedown"],Re=["textContent"],Ae={class:"multiselect__spinner"},Pe=["name","id","spellcheck","placeholder","required","value","disabled","tabindex","aria-label","aria-controls"],Me=["id","aria-multiselectable"],Fe={key:0},Ie={class:"multiselect__option"},qe=["aria-selected","id","role"],Ne=["onClick","onMouseenter","data-select","data-selected","data-deselect"],He=["data-select","data-deselect","onMouseenter","onMousedown"],je={class:"multiselect__option"},Ge={class:"multiselect__option"};function Ue(e,s,i,h,a,r){return d(),u("div",{tabindex:e.searchable?-1:i.tabindex,class:Y([{"multiselect--active":e.isOpen,"multiselect--disabled":i.disabled,"multiselect--above":r.isAbove,"multiselect--has-options-group":r.hasOptionGroup},"multiselect"]),onFocus:s[14]||(s[14]=l=>e.activate()),onBlur:s[15]||(s[15]=l=>e.searchable?!1:e.deactivate()),onKeydown:[s[16]||(s[16]=M(E(l=>e.pointerForward(),["self","prevent"]),["down"])),s[17]||(s[17]=M(E(l=>e.pointerBackward(),["self","prevent"]),["up"])),s[18]||(s[18]=M(E(l=>e.addPointerElement(l),["stop","self"]),["enter","tab"]))],onKeyup:s[19]||(s[19]=M(l=>e.deactivate(),["esc"])),role:"combobox","aria-expanded":e.isOpen,"aria-owns":"listbox-"+e.id,"aria-activedescendant":e.isOpen&&e.pointer!==null?e.id+"-"+e.pointer:null},[T(e.$slots,"caret",{toggle:e.toggle},()=>[t("div",{onMousedown:s[0]||(s[0]=E(l=>e.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),T(e.$slots,"clear",{search:e.search}),t("div",Be,[T(e.$slots,"selection",{search:e.search,remove:e.removeElement,values:r.visibleValues,isOpen:e.isOpen},()=>[ee(t("div",Te,[(d(!0),u(q,null,N(r.visibleValues,(l,f)=>T(e.$slots,"tag",{option:l,search:e.search,remove:e.removeElement},()=>[(d(),u("span",{class:"multiselect__tag",key:f,onMousedown:s[1]||(s[1]=E(()=>{},["prevent"]))},[t("span",{textContent:$(e.getOptionLabel(l))},null,8,De),t("i",{tabindex:"1",onKeydown:M(E(O=>e.removeElement(l),["prevent"]),["enter"]),onMousedown:E(O=>e.removeElement(l),["prevent"]),class:"multiselect__tag-icon"},null,40,xe)],32))])),256))],512),[[se,r.visibleValues.length>0]]),e.internalValue&&e.internalValue.length>i.limit?T(e.$slots,"limit",{key:0},()=>[t("strong",{class:"multiselect__strong",textContent:$(i.limitText(e.internalValue.length-i.limit))},null,8,Re)]):C("v-if",!0)]),W(he,{name:"multiselect__loading"},{default:ce(()=>[T(e.$slots,"loading",{},()=>[ee(t("div",Ae,null,512),[[se,i.loading]])])]),_:3}),e.searchable?(d(),u("input",{key:0,ref:"search",name:i.name,id:e.id,type:"text",autocomplete:"off",spellcheck:i.spellcheck,placeholder:e.placeholder,required:r.isRequired,style:ie(r.inputStyle),value:e.search,disabled:i.disabled,tabindex:i.tabindex,"aria-label":i.name+"-searchbox",onInput:s[2]||(s[2]=l=>e.updateSearch(l.target.value)),onFocus:s[3]||(s[3]=E(l=>e.activate(),["prevent"])),onBlur:s[4]||(s[4]=E(l=>e.deactivate(),["prevent"])),onKeyup:s[5]||(s[5]=M(l=>e.deactivate(),["esc"])),onKeydown:[s[6]||(s[6]=M(E(l=>e.pointerForward(),["prevent"]),["down"])),s[7]||(s[7]=M(E(l=>e.pointerBackward(),["prevent"]),["up"])),s[8]||(s[8]=M(E(l=>e.addPointerElement(l),["prevent","stop","self"]),["enter"])),s[9]||(s[9]=M(E(l=>e.removeLastElement(),["stop"]),["delete"]))],class:"multiselect__input","aria-controls":"listbox-"+e.id},null,44,Pe)):C("v-if",!0),r.isSingleLabelVisible?(d(),u("span",{key:1,class:"multiselect__single",onMousedown:s[10]||(s[10]=E((...l)=>e.toggle&&e.toggle(...l),["prevent"]))},[T(e.$slots,"singleLabel",{option:r.singleValue},()=>[_($(e.currentOptionLabel),1)])],32)):C("v-if",!0),r.isPlaceholderVisible?(d(),u("span",{key:2,class:"multiselect__placeholder",onMousedown:s[11]||(s[11]=E((...l)=>e.toggle&&e.toggle(...l),["prevent"]))},[T(e.$slots,"placeholder",{},()=>[_($(e.placeholder),1)])],32)):C("v-if",!0)],512),(d(),fe(me,{to:"body",disabled:!i.useTeleport},[W(he,{name:"multiselect"},{default:ce(()=>[e.isOpen&&a.ready?(d(),u("div",{key:0,class:Y(["multiselect__content-wrapper",i.contentWrapperClass]),onFocus:s[12]||(s[12]=(...l)=>e.activate&&e.activate(...l)),tabindex:"-1",onMousedown:s[13]||(s[13]=E(()=>{},["prevent"])),style:ie([a.dropdownStyles,{maxHeight:e.optimizedHeight+"px"}]),ref:"list"},[t("ul",{class:"multiselect__content",style:ie(r.contentStyle),role:"listbox",id:"listbox-"+e.id,"aria-multiselectable":e.multiple},[T(e.$slots,"beforeList"),e.multiple&&e.max===e.internalValue.length?(d(),u("li",Fe,[t("span",Ie,[T(e.$slots,"maxElements",{},()=>[_("Maximum of "+$(e.max)+" options selected. First remove a selected option to select another.",1)])])])):C("v-if",!0),!e.max||e.internalValue.length<e.max?(d(!0),u(q,{key:1},N(e.filteredOptions,(l,f)=>(d(),u("li",{class:"multiselect__element",key:f,"aria-selected":e.isSelected(l),id:e.id+"-"+f,role:l&&(l.$isLabel||l.$isDisabled)?null:"option"},[l&&(l.$isLabel||l.$isDisabled)?C("v-if",!0):(d(),u("span",{key:0,class:Y([e.optionHighlight(f,l),"multiselect__option"]),onClick:E(O=>e.select(l),["stop"]),onMouseenter:E(O=>e.pointerSet(f),["self"]),"data-select":l&&l.isTag?e.tagPlaceholder:r.selectLabelText,"data-selected":r.selectedLabelText,"data-deselect":r.deselectLabelText},[T(e.$slots,"option",{option:l,search:e.search,index:f},()=>[t("span",null,$(e.getOptionLabel(l)),1)])],42,Ne)),l&&(l.$isLabel||l.$isDisabled)?(d(),u("span",{key:1,"data-select":e.groupSelect&&r.selectGroupLabelText,"data-deselect":e.groupSelect&&r.deselectGroupLabelText,class:Y([e.groupHighlight(f,l),"multiselect__option"]),onMouseenter:E(O=>e.groupSelect&&e.pointerSet(f),["self"]),onMousedown:E(O=>e.selectGroup(l),["prevent"])},[T(e.$slots,"option",{option:l,search:e.search,index:f},()=>[t("span",null,$(e.getOptionLabel(l)),1)])],42,He)):C("v-if",!0)],8,qe))),128)):C("v-if",!0),ee(t("li",null,[t("span",je,[T(e.$slots,"noResult",{search:e.search},()=>[s[20]||(s[20]=_("No elements found. Consider changing the search query."))])])],512),[[se,i.showNoResults&&e.filteredOptions.length===0&&e.search&&!i.loading]]),ee(t("li",null,[t("span",Ge,[T(e.$slots,"noOptions",{},()=>[s[21]||(s[21]=_("List is empty."))])])],512),[[se,i.showNoOptions&&(e.options.length===0||r.hasOptionGroup===!0&&e.filteredOptions.length===0)&&!e.search&&!i.loading]]),T(e.$slots,"afterList")],12,Me)],38)):C("v-if",!0)]),_:3})],8,["disabled"]))],42,Ce)}ae.render=Ue;const ze=["Aldi","Edeka","Lidl","Rewe","Netto"],ue=(e,s)=>{const i=e.__vccOpts||e;for(const[h,a]of s)i[h]=a;return i},Ke={class:"row g-3"},Ye={class:"col-md-12"},We={class:"col-md-12"},Je={class:"col-md-12"},Ze={class:"col-md-12"},Xe={class:"mt-2"},Qe={class:"d-flex flex-wrap gap-1"},et=["onClick"],tt={class:"col-md-12 mt-5"},st={class:"d-flex flex-column gap-2"},it=["onClick"],at={class:"d-flex align-items-center gap-1"},lt={key:0,class:"badge"},rt={key:1,class:"ti ti-arrow-up"},ot={key:2,class:"ti ti-arrow-down"},nt={__name:"FilterBar",props:{filters:{type:Object,required:!0},availableBrands:{type:Array,default:()=>[]},availableCategories:{type:Array,default:()=>[]},availableStores:{type:Array,default:()=>[]},sort:{type:Array,default:()=>[]}},emits:["update:filters","update:sort","reset"],setup(e,{emit:s}){const i=e,h=s,{getUniqueBrands:a,getUniqueCategories:r,getUniqueStores:l}=ge(),f=V({...i.filters}),O=V([...i.sort]),H=V([...i.availableBrands]),j=V([...i.availableCategories]),F=V([...i.availableStores]),P=V(!1),n=V(!1),p=V(!1),b=[{key:"fat",label:"Fat",icon:"ti ti-droplet"},{key:"carbs",label:"Carbs",icon:"ti ti-grain"},{key:"protein",label:"Protein",icon:"ti ti-barbell"},{key:"protein_fat_index",label:"Protein/Fat Index",icon:"ti ti-chart-line"}],v=ze;Q(()=>i.filters,g=>{f.value={...g}},{deep:!0}),Q(()=>i.sort,g=>{O.value=[...g]},{deep:!0}),Q(()=>i.availableBrands,g=>{H.value=[...g]}),Q(()=>i.availableCategories,g=>{j.value=[...g]}),Q(()=>i.availableStores,g=>{F.value=[...g]});function S(){h("update:filters",{...f.value})}function y(g){const o=O.value.findIndex(m=>m.field===g);o===-1?O.value=[...O.value,{field:g,direction:"asc"}]:O.value[o].direction==="asc"?O.value=O.value.map((c,w)=>w===o?{field:g,direction:"desc"}:c):O.value=O.value.filter((c,w)=>w!==o),h("update:sort",[...O.value])}function L(g){const o=O.value.find(m=>m.field===g);return o?o.direction:null}function B(g){const o=O.value.findIndex(m=>m.field===g);return o!==-1?o+1:null}function G(g){return!f.value.stores||f.value.stores.length===0?!1:f.value.stores.some(o=>{const m=typeof o=="object"?o.store:o;return m&&m.toLowerCase().includes(g.toLowerCase())})}function U(g){const o=F.value.filter(c=>c.store&&c.store.toLowerCase().includes(g.toLowerCase()));if(o.length===0)return;if(f.value.stores.some(c=>{const w=typeof c=="object"?c.store:c;return w&&w.toLowerCase().includes(g.toLowerCase())}))f.value.stores=f.value.stores.filter(c=>{const w=typeof c=="object"?c.store:c;return!(w&&w.toLowerCase().includes(g.toLowerCase()))});else{const c=new Set(f.value.stores.map(X=>typeof X=="object"?X.id:X)),w=o.filter(X=>!c.has(X.id));f.value.stores=[...f.value.stores,...w]}S()}let A=null,z=null,x=null;async function J(g){clearTimeout(A),A=setTimeout(async()=>{P.value=!0;try{H.value=await a(g)}catch(o){console.error("Error searching brands:",o)}finally{P.value=!1}},300)}async function te(g){clearTimeout(z),z=setTimeout(async()=>{n.value=!0;try{j.value=await r(g)}catch(o){console.error("Error searching categories:",o)}finally{n.value=!1}},300)}async function K(g){clearTimeout(x),x=setTimeout(async()=>{p.value=!0;try{F.value=await l(g)}catch(o){console.error("Error searching stores:",o)}finally{p.value=!1}},300)}return(g,o)=>(d(),u("div",Ke,[t("div",Ye,[o[4]||(o[4]=t("label",{class:"form-label"},[t("i",{class:"ti ti-search me-1"}),_(" Search ")],-1)),ee(t("input",{"onUpdate:modelValue":o[0]||(o[0]=m=>f.value.search=m),type:"text",class:"form-control",placeholder:"Search by name...",onInput:S},null,544),[[be,f.value.search]])]),t("div",We,[o[5]||(o[5]=t("label",{class:"form-label"},[t("i",{class:"ti ti-tag me-1"}),_(" Brands ")],-1)),W(D(ae),{modelValue:f.value.brands,"onUpdate:modelValue":[o[1]||(o[1]=m=>f.value.brands=m),S],options:H.value,multiple:!0,searchable:!0,loading:P.value,"close-on-select":!1,"clear-on-select":!1,"internal-search":!1,label:"brand","track-by":"id",placeholder:"Select brands...",onSearchChange:J},null,8,["modelValue","options","loading"])]),t("div",Je,[o[6]||(o[6]=t("label",{class:"form-label"},[t("i",{class:"ti ti-category me-1"}),_(" Categories ")],-1)),W(D(ae),{modelValue:f.value.categories,"onUpdate:modelValue":[o[2]||(o[2]=m=>f.value.categories=m),S],options:j.value,multiple:!0,searchable:!0,loading:n.value,"close-on-select":!1,"clear-on-select":!1,"internal-search":!1,label:"category","track-by":"id",placeholder:"Select categories...",onSearchChange:te},null,8,["modelValue","options","loading"])]),t("div",Ze,[o[8]||(o[8]=t("label",{class:"form-label"},[t("i",{class:"ti ti-building-store me-1"}),_(" Stores ")],-1)),W(D(ae),{modelValue:f.value.stores,"onUpdate:modelValue":[o[3]||(o[3]=m=>f.value.stores=m),S],options:F.value,multiple:!0,searchable:!0,loading:p.value,"close-on-select":!1,"clear-on-select":!1,"internal-search":!1,label:"store","track-by":"id",placeholder:"Select stores...",onSearchChange:K},null,8,["modelValue","options","loading"]),t("div",Xe,[o[7]||(o[7]=t("small",{class:"text-muted d-block mb-1"},"Quick Select",-1)),t("div",Qe,[(d(!0),u(q,null,N(D(v),m=>(d(),u("button",{key:m,class:Y(["btn btn-sm",G(m)?"btn-primary":"btn-outline-secondary"]),onClick:c=>U(m)},$(m),11,et))),128))])])]),t("div",tt,[o[9]||(o[9]=t("label",{class:"form-label"},[t("i",{class:"ti ti-sort-ascending me-1"}),_(" Sort By (order matters) ")],-1)),t("div",st,[(d(),u(q,null,N(b,m=>t("button",{key:m.key,class:Y(["btn btn-outline w-100 d-flex justify-content-between align-items-center",{active:L(m.key)!==null}]),onClick:c=>y(m.key)},[t("span",null,[t("i",{class:Y([m.icon,"me-1"])},null,2),_(" "+$(m.label),1)]),t("span",at,[B(m.key)!==null?(d(),u("span",lt,$(B(m.key)),1)):C("",!0),L(m.key)==="asc"?(d(),u("i",rt)):L(m.key)==="desc"?(d(),u("i",ot)):C("",!0)])],10,it)),64))])])]))}},dt=ue(nt,[["__scopeId","data-v-1cada2fc"]]),ut={class:"loading-overlay"},ct={__name:"LoadingState",props:{message:{type:String,default:"Loading..."}},setup(e){return(s,i)=>(d(),u("div",ut,[i[0]||(i[0]=t("div",{class:"spinner"},null,-1)),t("p",null,$(e.message),1)]))}},ht=ue(ct,[["__scopeId","data-v-f716d3f9"]]),pt={class:"product-cards-list"},ft={key:0,class:"empty"},gt={key:1,class:"row row-cards"},mt={class:"card"},bt={class:"card-img-top img-responsive img-responsive-21x9 card-img-top-custom"},vt=["src","alt"],yt={class:"card-body"},wt={class:"d-flex align-items-center mb-3"},St={class:"flex-fill"},$t=["href"],_t={class:"card-title mb-1"},Ot={class:"row g-2 mb-3"},Lt={class:"col-6"},Et={class:"d-flex flex-column"},kt={key:0,class:"text-body values"},Vt={key:1,class:"text-muted"},Ct={class:"col-6"},Bt={class:"d-flex flex-column"},Tt={key:0,class:"text-body values"},Dt={key:1,class:"text-muted"},xt={class:"col-4"},Rt={class:"d-flex flex-column"},At={key:0,class:"text-body values"},Pt={key:1,class:"text-muted"},Mt={class:"col-4"},Ft={class:"d-flex flex-column"},It={key:0,class:"text-body values"},qt={key:1,class:"text-muted"},Nt={class:"col-4"},Ht={class:"d-flex flex-column"},jt={key:0,class:"text-body values"},Gt={key:1,class:"text-muted"},Ut={class:"mb-0"},zt={key:0,class:"mb-2"},Kt={class:"d-flex flex-wrap gap-1"},Yt={key:1,class:"mb-2"},Wt={class:"d-flex flex-wrap gap-1"},Jt={key:2},Zt={class:"d-flex flex-wrap gap-1"},Xt={key:0,class:"card-footer"},Qt=["href"],es={__name:"ProductCardsList",props:{products:{type:Array,default:()=>[]}},setup(e){function s(h){h.target.style.display="none";const a=h.target.nextElementSibling;a&&(a.style.display="flex")}function i(h){if(!h)return[];if(Array.isArray(h))return h.map(a=>String(a).trim()).filter(Boolean).slice(0,3);if(typeof h=="string"){try{const a=JSON.parse(h);if(Array.isArray(a))return a.map(r=>String(r).trim()).filter(Boolean).slice(0,3)}catch{}return h.split(",").map(a=>a.trim()).filter(Boolean).slice(0,3)}return[]}return(h,a)=>(d(),u("div",pt,[e.products.length===0?(d(),u("div",ft,[...a[0]||(a[0]=[t("div",{class:"empty-icon"},[t("i",{class:"ti ti-package-off",style:{"font-size":"4rem"}})],-1),t("p",{class:"empty-title"},"No products found",-1),t("p",{class:"empty-subtitle text-muted"},"Try adjusting your filters",-1)])])):(d(),u("div",gt,[(d(!0),u(q,null,N(e.products,r=>(d(),u("div",{key:r.id,class:"col-12 col-md-6 col-lg-4"},[t("div",mt,[t("div",bt,[r.image_url?(d(),u("img",{key:0,loading:"lazy",src:r.image_url,alt:r.name,crossorigin:"anonymous",class:"product-image",onError:s},null,40,vt)):C("",!0),t("div",{class:"placeholder-icon",style:ie({display:r.image_url?"none":"flex"})},[...a[1]||(a[1]=[t("i",{class:"ti ti-photo-off"},null,-1)])],4)]),t("div",yt,[t("div",wt,[t("div",St,[t("a",{href:r.url||"#",target:"_blank",rel:"noopener noreferrer",class:"text-reset text-decoration-none"},[t("h3",_t,$(r.name||"Unknown Product"),1)],8,$t)])]),t("div",Ot,[t("div",Lt,[t("div",Et,[a[2]||(a[2]=t("small",{class:"text-muted mb-1"},[t("i",{class:"ti ti-flame me-1"}),_("Energy ")],-1)),r.energy?(d(),u("strong",kt,$(Math.round(r.energy))+" kcal ",1)):(d(),u("span",Vt,"-"))])]),t("div",Ct,[t("div",Bt,[a[3]||(a[3]=t("small",{class:"text-muted mb-1"},[t("i",{class:"ti ti-chart-line me-1"}),_("P/F Index ")],-1)),r.protein_fat_index?(d(),u("strong",Tt,$(Number(r.protein_fat_index).toFixed(2)),1)):(d(),u("span",Dt,"-"))])]),t("div",xt,[t("div",Rt,[a[4]||(a[4]=t("small",{class:"text-muted mb-1"},"Fat",-1)),r.fat?(d(),u("strong",At,$(r.fat)+" g",1)):(d(),u("span",Pt,"-"))])]),t("div",Mt,[t("div",Ft,[a[5]||(a[5]=t("small",{class:"text-muted mb-1"},"Carbs",-1)),r.carbs?(d(),u("strong",It,$(r.carbs)+" g",1)):(d(),u("span",qt,"-"))])]),t("div",Nt,[t("div",Ht,[a[6]||(a[6]=t("small",{class:"text-muted mb-1"},"Protein",-1)),r.protein?(d(),u("strong",jt,$(r.protein)+" g",1)):(d(),u("span",Gt,"-"))])])]),t("div",Ut,[r.brands?(d(),u("div",zt,[a[7]||(a[7]=t("small",{class:"text-muted d-block mb-1"},[t("i",{class:"ti ti-tag me-1"}),_("Brands ")],-1)),t("div",Kt,[(d(!0),u(q,null,N(i(r.brands),(l,f)=>(d(),u("span",{key:f,class:"badge bg-blue-lt"},$(l),1))),128))])])):C("",!0),r.categories?(d(),u("div",Yt,[a[8]||(a[8]=t("small",{class:"text-muted d-block mb-1"},[t("i",{class:"ti ti-category me-1"}),_("Categories ")],-1)),t("div",Wt,[(d(!0),u(q,null,N(i(r.categories),(l,f)=>(d(),u("span",{key:f,class:"badge bg-green-lt"},$(l),1))),128))])])):C("",!0),r.stores?(d(),u("div",Jt,[a[9]||(a[9]=t("small",{class:"text-muted d-block mb-1"},[t("i",{class:"ti ti-building-store me-1"}),_("Stores ")],-1)),t("div",Zt,[(d(!0),u(q,null,N(i(r.stores),(l,f)=>(d(),u("span",{key:f,class:"badge bg-orange-lt"},$(l),1))),128))])])):C("",!0)])]),r.url?(d(),u("div",Xt,[t("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",class:"btn btn-outline-primary w-100"},[...a[10]||(a[10]=[t("i",{class:"ti ti-external-link me-1"},null,-1),_(" View ",-1)])],8,Qt)])):C("",!0)])]))),128))]))]))}},ts=ue(es,[["__scopeId","data-v-ebd8716f"]]),ss={id:"app"},is={class:"navbar navbar-expand-md navbar-light d-print-none"},as={class:"container-xl"},ls={class:"navbar-nav flex-row order-md-last"},rs={class:"d-flex align-items-center"},os={class:"col-auto ms-auto d-print-none"},ns={class:"btn-list"},ds=["disabled"],us={key:0,class:"ti ti-download"},cs={key:1,class:"spinner-border spinner-border-sm me-2"},hs=["disabled"],ps={class:"page-wrapper"},fs={class:"page-body"},gs={class:"container-xl"},ms={class:"row"},bs={class:"col-lg-3 mb-3"},vs={class:"card sticky-top",style:{top:"1rem"}},ys={class:"card-body"},ws={class:"row row-cards mt-3"},Ss={class:"col-12"},$s={class:"card"},_s={class:"card-body"},Os={class:"h1 mb-0"},Ls={class:"col-12"},Es={class:"card"},ks={class:"card-body"},Vs={class:"h1 mb-0"},Cs={class:"col-lg-9"},Bs={class:"card mb-3"},Ts={class:"card-header"},Ds={class:"card-title"},xs={class:"card-actions"},Rs={class:"d-flex align-items-center gap-2"},As=["disabled"],Ps={class:"text-muted"},Ms=["disabled"],Fs={class:"card-body"},de="food-app-sort",Is=21,qs={__name:"App",setup(e){const{loading:s,loadingMessage:i,dbStats:h,loadData:a,clearDatabase:r,updateStats:l,queryProducts:f,getUniqueBrands:O,getUniqueCategories:H,getUniqueStores:j,hasData:F}=ge(),P=V([]),n=V({search:"",brands:[],categories:[],stores:[]});function p(){try{const c=localStorage.getItem(de);return c?JSON.parse(c):[]}catch(c){return console.error("Error loading saved sort:",c),[]}}const b=V(p()),v=V(1),S=V(0),y=V(0),L=V([]),B=V([]),G=V([]);async function U(){L.value=await O(),B.value=await H(),G.value=await j()}async function A(c){c&&(n.value={...c}),v.value=1,await x()}async function z(c){if(c){b.value=[...c];try{localStorage.setItem(de,JSON.stringify(c))}catch(w){console.error("Error saving sort:",w)}}v.value=1,await x()}async function x(){const c=await f(n.value,v.value,Is,b.value);P.value=c.products,y.value=c.totalCount,S.value=c.totalPages}function J(){n.value={search:"",brands:[],categories:[],stores:[]},b.value=[];try{localStorage.removeItem(de)}catch(c){console.error("Error clearing saved sort:",c)}A()}async function te(){v.value<S.value&&(v.value++,await x())}async function K(){v.value>1&&(v.value--,await x())}async function g(){try{await a(),await U(),await A()}catch(c){alert("Error loading data: "+c.message)}}async function o(){await r()&&(P.value=[],y.value=0,S.value=1,L.value=[],B.value=[])}async function m(){if(await l(),await F())await U(),await x();else try{await a(),await U(),await A()}catch{console.log("No cached database found, waiting for user to load")}}return ve(()=>{m()}),(c,w)=>(d(),u("div",ss,[D(s)?(d(),fe(ht,{key:0,message:D(i)},null,8,["message"])):C("",!0),t("header",is,[t("div",as,[w[1]||(w[1]=t("h1",{class:"navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3"},[t("a",{href:"#"},[t("span",{class:"navbar-brand-image"}),_(" OpenFoodFacts Germany ")])],-1)),t("div",ls,[t("div",rs,[t("div",os,[t("div",ns,[t("button",{class:"btn btn-primary",onClick:g,disabled:D(s)},[D(s)?C("",!0):(d(),u("i",us)),D(s)?(d(),u("span",cs)):C("",!0),_(" "+$(D(s)?D(i):"Load Database"),1)],8,ds),D(h).count>0?(d(),u("button",{key:0,class:"btn btn-outline-danger",onClick:o,disabled:D(s)},[...w[0]||(w[0]=[t("i",{class:"ti ti-trash"},null,-1),_(" Clear Data ",-1)])],8,hs)):C("",!0)])])])])])]),t("div",ps,[t("div",fs,[t("div",gs,[t("div",ms,[t("div",bs,[t("div",vs,[t("div",{class:"card-header"},[w[3]||(w[3]=t("h3",{class:"card-title"},[t("i",{class:"ti ti-filter me-2"}),_(" Filters ")],-1)),t("div",{class:"card-actions"},[t("button",{class:"btn btn-outline",onClick:J},[...w[2]||(w[2]=[t("i",{class:"ti ti-refresh"},null,-1),_(" Reset ",-1)])])])]),t("div",ys,[W(dt,{filters:n.value,sort:b.value,"available-brands":L.value,"available-categories":B.value,"available-stores":G.value,"onUpdate:filters":A,"onUpdate:sort":z,onReset:J},null,8,["filters","sort","available-brands","available-categories","available-stores"])])]),t("div",ws,[t("div",Ss,[t("div",$s,[t("div",_s,[w[4]||(w[4]=t("div",{class:"subheader"},"Total Products",-1)),t("div",Os,$(D(h).count.toLocaleString()),1)])])]),t("div",Ls,[t("div",Es,[t("div",ks,[w[5]||(w[5]=t("div",{class:"subheader"},"Filtered Results",-1)),t("div",Vs,$(y.value.toLocaleString()),1)])])])])]),t("div",Cs,[t("div",Bs,[t("div",Ts,[t("h3",Ds," Products ("+$(P.value.length)+" of "+$(y.value.toLocaleString())+") ",1),t("div",xs,[t("div",Rs,[t("button",{class:"btn btn-outline-primary",onClick:K,disabled:v.value===1},[...w[6]||(w[6]=[t("i",{class:"ti ti-chevron-left"},null,-1),_(" Previous ",-1)])],8,As),t("span",Ps," Page "+$(v.value)+" of "+$(S.value),1),t("button",{class:"btn btn-outline-primary",onClick:te,disabled:v.value>=S.value},[...w[7]||(w[7]=[_(" Next ",-1),t("i",{class:"ti ti-chevron-right"},null,-1)])],8,Ms)])])]),t("div",Fs,[W(ts,{products:P.value},null,8,["products"])])])])])])]),w[8]||(w[8]=ye('<footer class="footer footer-transparent d-print-none"><div class="container-xl"><div class="row text-center align-items-center"><div class="col-12 col-lg-auto mt-3 mt-lg-0"><ul class="list-inline list-inline-dots mb-0"><li class="list-inline-item"> Powered by OpenFoodFacts data </li><li class="list-inline-item"><a href="https://github.com/mkoziy/food" target="_blank" rel="noopener noreferrer" class="link-muted align-items-center"><svg xmlns="http://www.w3.org/2000/svg" class="me-1" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 .5C5.7.5.9 5.3.9 11.6c0 4.7 3 8.7 7.2 10.1.5.1.7-.2.7-.5v-1.9c-2.9.6-3.5-1.4-3.5-1.4-.5-1.2-1.2-1.6-1.2-1.6-1-.7.1-.7.1-.7 1.1.1 1.7 1.1 1.7 1.1 1 .1 1.6.7 1.9 1.2.1-.8.4-1.4.8-1.8-2.3-.3-4.7-1.2-4.7-5.3 0-1.2.4-2.1 1.1-2.8-.1-.3-.5-1.5.1-3.1 0 0 .9-.3 3 .1.9-.3 1.8-.4 2.7-.4s1.8.1 2.7.4c2.1-.4 3-.1 3-.1.6 1.6.2 2.8.1 3.1.7.7 1.1 1.6 1.1 2.8 0 4.1-2.4 5-4.7 5.3.4.3.8 1.1.8 2.2v3.2c0 .3.2.6.7.5 4.2-1.4 7.2-5.4 7.2-10.1C23.1 5.3 18.3.5 12 .5z"></path></svg> Source on GitHub </a></li></ul></div></div></div></footer>',1))])]))}};we(qs).mount("#app");
